<!DOCTYPE html>
<html class="wf-adelle-n4-active wf-adelle-i4-active wf-adelle-n7-active wf-adelle-i7-active wf-active"><head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diullei Gomes</title>
    
    <link rel="stylesheet" type="text/css" href="../assets/screen.css">
    	
  </head>
  <body><div id="container">
  <div id="nav">
    
      <div id="header">
        <a href="#" id="logo">
			{=Diullei Gomes}
		</a>
		  <div>
			<span style="font-style:italic;color:#808080">Cristão, Programador .NET apaixonado por Desenvolvimento de Software.</span>
		  </div>
		
		  <div class="extra twitter">
			<a href="https://twitter.com/diullei" class="twitter-follow-button" data-show-count="false" data-lang="en">Follow @diullei</a>
			<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
		  </div>
      </div>
    
    <ul id="sections">
            
        <li>
          <a href="#">Artigos</a>
          
            <ul id="artigos"><li><a href='Debugando-TyprScript-no-navegador.html'><span>[16-10-2012]</span> Debugando TyprScript no navegador<br/></a></li><li><a href='Introducao-ao-TypeScript.html'><span>[12-10-2012]</span> Introdução ao TypeScript<br/></a></li><li><a href='JavaScript-NoConflict.html'><span>[29-07-2012]</span> JavaScript - NoConflict<br/></a></li><li><a href='Lendo-arquivos-com-Nodejs.html'><span>[18-07-2012]</span> Lendo arquivos com Node.js<br/></a></li><li><a href='Configurando-o-NodeJs-com-o-Npp.html'><span>[17-07-2012]</span> Configurando o NodeJs com o NotePad++<br/></a></li></ul>
          
        </li>
            
    </ul>
          
  </div>
	<a href="https://github.com/Diullei/diullei.github.com" id="github-ribbon"><img src="../assets/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
	  <div id="content">
			<div id="blog-content">
				<h1>JavaScript - NoConflict</h1><span>by: Diullei Gomes @ 29-07-2012</span><hr/><p>Você já deve ter visto exemplos de código <em>JQuery</em>, <em>Underscore</em>, <em>Backbone</em> ou outros que utilizassem um método chamado <code>noConflict()</code>. Vamos entender para que serve este método.</p>

<p>Como o próprio nome já diz este método é colocado na biblioteca para permitir que seu código coexista com outros códigos sem a ocorrência de conflitos. </p>

<p>Vamos a um exemplo utilizando duas bibliotecas que utilizam o mesmo nome:</p>

<pre><code>// libA
(function(exports){
    function LibA(){}
    LibA.prototype.Execute = function(){
        console.log('lib A');
    }

    exports.$ = new LibA();
})(window);

// libB
(function(exports){
    function LibB(){}
    LibB.prototype.Execute = function(){
        console.log('lib B');
    }

    exports.$ = new LibB();
})(window);

$.Execute();
//=> lib B
</code></pre>

<p>Note que no exemplo acima estamos criando duas bibliotecas e dando a elas o mesmo alias <code>$</code>. Quando a libA é criada ela cria uma instância global chamada $. Caso executemos $.Execute() teremos como resultado o texto <code>lib A</code> no console. Mais veja que logo em seguida criamos a libB. A libB também está utilizando o mesmo nome para sua instância global <code>$</code> fazendo com que a instância da libA seja sobrescrita. Assim quando chamamos $.Execute() temos como resultado o texto <code>lib B</code>.</p>

<p>Uma forma elegante de permitir que o problema acima seja contornado é utilizar um método <code>noConflict()</code>. Veja o exemplo reescrito:</p>

<pre><code>// lib A
(function(exports){
    var oldLib = exports.$;

    function LibA(){}
    LibA.prototype.Execute = function(){
        console.log('lib A');
    }

    LibA.prototype.noConflict = function(){
        exports.$ = oldLib;
        return this;
    }

    exports.$ = new LibA();
})(window);

// lib B
(function(exports){
    var oldLib = exports.$;

    function LibB(){}
    LibB.prototype.Execute = function(){
        console.log('lib B');
    }

    LibB.prototype.noConflict = function(){
        exports.$ = oldLib;
        return this;
    }

    exports.$ = new LibB();
})(window);

$libB = $.noConflict();

$.Execute();
//=> lib A

$libB.Execute();
//=> lib B
</code></pre>

<p>Note que no exemplo acima fizemos em libB um 'backup' do valor de <code>$</code> antes de altera-lo. Adicionamos uma função chamada <code>noConflict()</code> com o objetivo de restaurar o antigo valor de <code>$</code> e retornar a propria libB como resultado. Isso permite a quem estiver utilizando o código renomear a instância de libB. Veja que no código acima alteramos o nome de <code>$</code> para $libB.</p>

<p>Usando este artificio poderíamos também fazer com que 2 ou mais versões de uma mesma biblioteca coexistissem no mesmo código.</p>

<p>Seguem algumas referências a trechos de códigos reais que utilizam este padrão:</p>

<p><strong>jQuery</strong></p>

<pre><code>...
_$ = window.$,
...
noConflict: function( deep ) {
    if ( window.$ === jQuery ) {
        window.$ = _$;
    }

    if ( deep && window.jQuery === jQuery ) {
        window.jQuery = _jQuery;
    }

    return jQuery;
},
...</code></pre>

<p><strong>Backbone</strong></p>

<pre><code>...
var previousBackbone = root.Backbone;
...
Backbone.noConflict = function() {
    root.Backbone = previousBackbone;
    return this;
};
...</code></pre>

<p><strong>Underscore</strong></p>

<pre><code>...
var previousUnderscore = root._;
...
_.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };
  ...</code></pre>

<p>Esses são só alguns exemplos.</p>

<p>Abraços!</p>
			</div>
  
		   <div id="disqus_thread"></div>
		   <script>
				/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
				var disqus_shortname = 'diulleigomes'; // required: replace example with your forum shortname
				var disqus_identifier = 'JavaScript - NoConflict';
				var disqus_title = 'JavaScript - NoConflict';
				var disqus_message = 'JavaScript - NoConflict';
				/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
				(function() {
					var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
					dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
					(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
				})();
		   </script>
			<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
			<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
         
	  </div>
  
</div>

    <script src="assets/jquery.js"></script>
    <script src="assets/showdown.js"></script>
	<script src="assets/highlight.min.js"></script>
	<script src="assets/blog.js"></script>

</body></html>