<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Arrays tipados - ES6 | Diullei</title>
  <meta name="description" content="null">
  <meta name="keywords" content="">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/">
  <link rel="alternate" href="/atom.xml" title="Diullei">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Os arrays tipados são parte da especificação do ECMAScript 2015 (também conhecido como ES6). Eles foram projetados para facilitar o trabalho com estruturas de dados binárias. Inicialmente os arrays ti">
<meta name="keywords" content="JavaScript,ES6">
<meta property="og:type" content="article">
<meta property="og:title" content="Arrays tipados - ES6">
<meta property="og:url" content="http://diullei.com/2016/10/28/Arrays-tipados-ES6/index.html">
<meta property="og:site_name" content="Diullei">
<meta property="og:description" content="Os arrays tipados são parte da especificação do ECMAScript 2015 (também conhecido como ES6). Eles foram projetados para facilitar o trabalho com estruturas de dados binárias. Inicialmente os arrays ti">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-01-07T23:15:42.331Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Arrays tipados - ES6">
<meta name="twitter:description" content="Os arrays tipados são parte da especificação do ECMAScript 2015 (também conhecido como ES6). Eles foram projetados para facilitar o trabalho com estruturas de dados binárias. Inicialmente os arrays ti">
    
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href="//cdn.bootcss.com/node-waves/0.7.5/waves.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
</head>
</html>
<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
	<div class="wrapper">
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href="/">
				Diullei
			</a>
			<div class="menu">
				<ul class="h-list">
					
						<li>
							<a class="flat-box nav-home" href="/">
								Home
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-archives" href="/archives">
								Archives
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-gallery" href="https://photos.google.com/album/AF1QipNoqKYgspQo5O1YhlFXGCQ7p575KBH3Yxf8WHL4?hl=zh-CN">
								Gallery
							</a>
						</li>
					
						<li>
							<a class="flat-box nav-about" href="/about">
								About
							</a>
						</li>
					
				</ul>
				<div class="underline"></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search">
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class="switcher h-list">
				
					<li class="s-search"><a href="javascript:void(0)"><span class="icon icon-search flat-box"></span></a></li>
				
				<li class="s-menu"><a href="javascript:void(0)"><span class="icon icon-menu flat-box"></span></a></li>
			</ul>
		</div>
		
		<div class="nav-sub container container--flex">
			<a class="logo" href="javascript:void(0)">
				Word of Forks
			</a>

			<ul class="switcher h-list">
				<li class="s-comment"><a href="javascript:void(0)"><span class="icon icon-chat_bubble_outline flat-box"></span></a></li>
				<li class="s-top"><a href="javascript:void(0)"><span class="icon icon-arrow_upward flat-box"></span></a></li>
				<li class="s-toc"><a href="javascript:void(0)"><span class="icon icon-format_list_numbered flat-box"></span></a></li>
			</ul>
		</div>
	</div>
</header>
<aside class="menu-phone">
	<nav>
		
			<a href="/" class="nav-home nav">
				Home
			</a>
		
			<a href="/archives" class="nav-archives nav">
				Archives
			</a>
		
			<a href="https://photos.google.com/album/AF1QipNoqKYgspQo5O1YhlFXGCQ7p575KBH3Yxf8WHL4?hl=zh-CN" class="nav-gallery nav">
				Gallery
			</a>
		
			<a href="/about" class="nav-about nav">
				About
			</a>
		
	</nav>
</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        <article id="post-Arrays-tipados-ES6" class="post white-box article-type-post" itemscope="" itemprop="blogPost">
	<section class="meta">
	<h2 class="title">
  	<a href="/2016/10/28/Arrays-tipados-ES6/">
    	Arrays tipados - ES6
    </a>
  </h2>
	<time>
	  Oct 28, 2016
	</time>
	
    
    <div class="cats">
        <a href="/categories/JavaScript/">JavaScript</a>, <a href="/categories/JavaScript/ES6/">ES6</a>
    </div>

	</section>
	
		<section class="toc-wrapper"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Criando-Arrays-tipados"><span class="toc-number">1.</span> <span class="toc-text">Criando Arrays tipados</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ArrayBuffer-e-DataView"><span class="toc-number">2.</span> <span class="toc-text">ArrayBuffer e DataView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Onde-esse-recurso-ja-esta-sendo-utilizado"><span class="toc-number">3.</span> <span class="toc-text">Onde esse recurso ja está sendo utilizado?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Conclusao"><span class="toc-number">4.</span> <span class="toc-text">Conclusão</span></a></li></ol></section>
	
	<section class="article typo">
  	<div class="article-entry" itemprop="articleBody">
    	<p>Os arrays tipados são parte da especificação do ECMAScript 2015 (também conhecido como ES6). Eles foram projetados para facilitar o trabalho com estruturas de dados binárias. Inicialmente os arrays tipados foram introduzidos pelas APIs WebGL com o objetivo de diminuir a dissonância entre as estruturas de dados padrões do <code>JavaScript</code> e as estruturas de dados do <code>C</code>, linguagem base da API <code>WebGL</code>, e com isso permitir ao JavaScript acessar diretamente a estrutura já alocada em memória.</p>
<p>Você pode acessar este <a href="http://caniuse.com/#feat=typedarrays" target="_blank" rel="noopener">link</a> para saber quais browsers já suportam esse recurso: <a href="http://caniuse.com/#feat=typedarrays" target="_blank" rel="noopener">http://caniuse.com/#feat=typedarrays</a></p>
<h2 id="Criando-Arrays-tipados"><a href="#Criando-Arrays-tipados" class="headerlink" title="Criando Arrays tipados"></a>Criando Arrays tipados</h2><p>Aqui não existe nenhum segredo, criamos um array tipado da mesma forma que criarpiamos qualquer instância de objeto. em JavaScript:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Uint16Array</span>(<span class="number">10</span>);</span><br><span class="line">arr[<span class="number">0</span>] = <span class="number">0xFFFF</span>;</span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p>O argumento passado no construtor define o número de elementos que estamos alocando neste array (No exemplo acima estamos alocando 10 elementos do tipo numérico <code>uint16</code>, o que de acordo com a especificação deste tipo de array irá alocar 20 bytes de memória).</p>
<p>Veja abaixo uma lista com os tipos de arrays tipados disponíveis:</p>
<table>
<thead>
<tr>
<th style="text-align:left">Tipo</th>
<th style="text-align:center">Tamanho (byte)</th>
<th style="text-align:left">Tipo correspondente em C</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Int8Array</code></td>
<td style="text-align:center">1</td>
<td style="text-align:left">int8_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Uint8Array</code></td>
<td style="text-align:center">1</td>
<td style="text-align:left">uint8_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Uint8ClampedArray</code></td>
<td style="text-align:center">1</td>
<td style="text-align:left">uint8_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Int16Array</code></td>
<td style="text-align:center">2</td>
<td style="text-align:left">int16_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Uint16Array</code></td>
<td style="text-align:center">2</td>
<td style="text-align:left">uint16_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Int32Array</code></td>
<td style="text-align:center">4</td>
<td style="text-align:left">int32_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Uint32Array</code></td>
<td style="text-align:center">4</td>
<td style="text-align:left">uint32_t</td>
</tr>
<tr>
<td style="text-align:left"><code>Float32Array</code></td>
<td style="text-align:center">4</td>
<td style="text-align:left">float</td>
</tr>
<tr>
<td style="text-align:left"><code>Float64Array</code></td>
<td style="text-align:center">8</td>
<td style="text-align:left">double</td>
</tr>
</tbody>
</table>
<h2 id="ArrayBuffer-e-DataView"><a href="#ArrayBuffer-e-DataView" class="headerlink" title="ArrayBuffer e DataView"></a>ArrayBuffer e DataView</h2><p><code>ArrayBuffer</code> e <code>DataView</code> são parte da implementação de arrays tipados. Um <code>ArrayBuffer</code> básicamente armazena os dados de um array tipado. Por exemplo:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fileArrayBuffer = reader.readAsArrayBuffer(file);</span><br></pre></td></tr></table></figure>
<p>Neste código <code>ArrayBuffer</code> ira armazenar todos os bytes do arquivo. Como esse arquivo pode estar em encodes diferentes, precisaremos fazer alguma manipulação para ler seu conteúdo. Por exemplo, se este arquivo for do tipo <code>UTF-8</code> poderemos associar este <code>ArrayBuffer</code> ao tipo <code>Uint16Array</code> para ler corretamente seu conteúdo.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Uint16Array</span>(fileArrayBuffer);</span><br><span class="line"><span class="built_in">String</span>.fromCharCode(arr[<span class="number">0</span>]); <span class="comment">// A</span></span><br></pre></td></tr></table></figure>
<p>Já o <code>DataView</code> é um tipo que nos permite acessar estruturas binrias em memória. Exemplo, se tivermos uma estrutura em <code>C</code> declarada da seguinte forma:</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">data</span> &#123;</span></span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">char</span>[<span class="number">10</span>] username;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Iremos ler esta estrutura em JavaScript com o código:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">11</span>);</span><br><span class="line"><span class="keyword">var</span> id = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">var</span> username = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf, <span class="number">1</span>, <span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>Note que se trata de uma leitura sequencial da memória onde o primeiro byte contém o valor de <code>id</code> e os outros 10 bytes seguintes o valor de <code>username</code>. Aqui estamos utilizando <code>Uint8Array</code> como <code>DataView</code>.</p>
<h2 id="Onde-esse-recurso-ja-esta-sendo-utilizado"><a href="#Onde-esse-recurso-ja-esta-sendo-utilizado" class="headerlink" title="Onde esse recurso ja está sendo utilizado?"></a>Onde esse recurso ja está sendo utilizado?</h2><ul>
<li><strong>WebGL</strong> - Utiliza typed arrays em buffer, pixels e mapas de testuras</li>
<li><strong>Canvas</strong> - Canvas utiliza um arrau tipado para armazenar uma imagem.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> uint8ClampedArray = ctx.getImageData(...).data;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>WebSockets</strong> - Uma vez habilitado permite a transferência de dados utilizando um <code>ArrayBuffer</code>.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webSocket.binaryType = <span class="string">'arraybuffer'</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Outras APIs</strong> - <em>File API</em>, <em>XMLHttpRequest,</em> <em>Fetch API</em>, <code>window.postMessage()</code> entre outros.</li>
</ul>
<h2 id="Conclusao"><a href="#Conclusao" class="headerlink" title="Conclusão"></a>Conclusão</h2><p>Iremos utilizar os Arrays typados em trechos de código muito específicos onde a performance com a manipulação de estruturas de dados mais complexas for importante, como por exemplo a manipulação de imagens e de som.</p>
<p>É isso, até a próxima.</p>

  	</div>
	  
	  <div class="article-tags tags">
      
        <a href="/tags/JavaScript/">JavaScript</a>
      
        <a href="/tags/ES6/">ES6</a>
      
	  </div>
    
		
	
		<div class="art-item-footer">
				
					<span class="art-item-left"><i class="icon icon-chevron-thin-left"></i>prev：<a href="/2016/11/01/jQuery-10-dicas-de-performance/" rel="prev" title="jQuery - 10 dicas de performance">
						jQuery - 10 dicas de performance 
					</a></span>
				
				
					<span class="art-item-right">next：<a href="/2016/10/27/Type-of-this-for-functions/" rel="next" title="Definindo o tipo de &quot;this&quot; em funções">
						Definindo o tipo de &quot;this&quot; em funções
					</a><i class="icon icon-chevron-thin-right"></i></span>
				
		</div>
	
	</section>
	
</article>
<script>
	window.subData = {
		title: 'Arrays tipados - ES6',
		tools: true
	}
</script>

      </div>
      <aside class='l_side'>
        
  <section class="m_widget about">

<div class="header">Diullei Gomes</div>
<div class="content">
<div class="desc">Tempora mutantur, nos et mutamur in illis ...</div>
</div>
</section>

  <section class="m_widget links">
<div class="header">Links</div>
<div class="content">
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://ccoooss.com">
            <div class="name">ClassicOldSong</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://frantic1048.logdown.com/">
            <div class="name">Frantic1048</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://hclmaster.github.io/">
            <div class="name">Hclmaster</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://whst.github.io/">
            <div class="name">WANG Hsü-Tung</div>
        </a></li>
    
    </ul>
</div>
</section>

  <section class="m_widget categories">
<div class="header">Categories</div>
<div class="content">
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/TypeScript/DefinitelyTyped/"><div class="name">DefinitelyTyped</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v2-0/DefinitelyTyped/"><div class="name">DefinitelyTyped</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v1-4/ES6/"><div class="name">ES6</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/JavaScript/ES6/"><div class="name">ES6</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/ES6/"><div class="name">ES6</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/JavaScript/"><div class="name">JavaScript</div><div class="badget">3</div></a></li>
    
        <li><a class="flat-box" href="/categories/NodeJs/"><div class="name">NodeJs</div><div class="badget">2</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/"><div class="name">TypeScript</div><div class="badget">25</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v1-0/"><div class="name">TypeScript v1.0</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v1-4/"><div class="name">TypeScript v1.4</div><div class="badget">4</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v1-5/"><div class="name">TypeScript v1.5</div><div class="badget">2</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v2-0/"><div class="name">TypeScript v2.0</div><div class="badget">6</div></a></li>
    
        <li><a class="flat-box" href="/categories/TypeScript/TypeScript-v2-1/"><div class="name">TypeScript v2.1</div><div class="badget">1</div></a></li>
    
        <li><a class="flat-box" href="/categories/JavaScript/jQuery/"><div class="name">jQuery</div><div class="badget">1</div></a></li>
    
    </ul>
    
</div>
</section>

  
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class="content">
        <a href="/tags/Bower/" style="font-size: 14px; color: #808080">Bower</a> <a href="/tags/Chrome/" style="font-size: 14px; color: #808080">Chrome</a> <a href="/tags/ES6/" style="font-size: 17px; color: #404040">ES6</a> <a href="/tags/JavaScript/" style="font-size: 18.5px; color: #202020">JavaScript</a> <a href="/tags/NodeJs/" style="font-size: 15.5px; color: #606060">NodeJs</a> <a href="/tags/Notepad/" style="font-size: 14px; color: #808080">Notepad++</a> <a href="/tags/REPL/" style="font-size: 14px; color: #808080">REPL</a> <a href="/tags/SourceMaps/" style="font-size: 14px; color: #808080">SourceMaps</a> <a href="/tags/TypeScript/" style="font-size: 20px; color: #000">TypeScript</a> <a href="/tags/VSCode/" style="font-size: 14px; color: #808080">VSCode</a> <a href="/tags/jQuery/" style="font-size: 14px; color: #808080">jQuery</a> <a href="/tags/tsd/" style="font-size: 14px; color: #808080">tsd</a>
    </div>
</div>



      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/stkevintan" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/kevinsfork" class="social twitter" target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="/atom.xml" class="social rss" target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme <a href="https://github.com/stkevintan/hexo-theme-material-flow" class="codename">MaterialFlow</a> designed by <a href="http://keyin.me/" target="_blank">Kevin Tan</a>.</div>
  
</footer>


  <script>setLoadingBarProgress(80);</script>
  

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/node-waves/0.7.5/waves.min.js"></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>
<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
</body>
</html>
