<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Debugando TypeScript no navegador | Diullei</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">Diullei</a><span class="subtitle"></span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/about" class="sidebar-nav-item">About</a><a href="/archives" class="sidebar-nav-item">Archives</a></div></nav><div id="header-margin-bar"></div><!-- gallery that comes before the header--><div class="wrapper"><div class="container post-header"><h1>Debugando TypeScript no navegador</h1></div></div><div class="wrapper"><div class="container meta"><div class="post-time">16-10-2012</div><div class="post-categories"><a class="post-category-link" href="/categories/TypeScript/">TypeScript</a></div><div class="post-tags"><a class="post-tag-link" href="/tags/Chrome/">Chrome</a>/<a class="post-tag-link" href="/tags/JavaScript/">JavaScript</a>/<a class="post-tag-link" href="/tags/SourceMaps/">SourceMaps</a>/<a class="post-tag-link" href="/tags/TypeScript/">TypeScript</a></div></div></div><article><div class="container post"><h2 id="Introducao"><a href="#Introducao" class="headerlink" title="Introdução"></a>Introdução</h2><p>Existe um recurso bem interessante implementado no Firefox e no Chrome (não sei ao certo quais outros navegadores) chamado <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/" target="_blank" rel="noopener">Source Maps</a>. Para entender do que se trata tenha em mente um arquivo javascript minificado. Para rastrear um bug no código deste arquivo por exemplo teríamos que usar a versão não minificada do mesmo. Uma vez encontrado o bug este seria corrigido e um novo arquivo minificado seria gerado. Um Source Map é um arquivo de mapeamento que faz um dê-para (no nosso caso) do arquivo minificado com o arquivo real. A partir deste mapeamento o browser consegue realizar o debug no arquivo original(não minificado) em bora a execução real esteja ocorrendo no arquivo minificado.</p>
<p>Até aqui isso não agregou muito por que basta referenciar o arquivo original como dito anteriormente. Uma vez que tenhamos o problema rastreado ou a feature implementada minificamos tudo novamente.</p>
<h3 id="Como-isso-pode-nos-ajudar-no-Debug-de-codigo-TypeScript"><a href="#Como-isso-pode-nos-ajudar-no-Debug-de-codigo-TypeScript" class="headerlink" title="Como isso pode nos ajudar no Debug de código TypeScript?"></a>Como isso pode nos ajudar no Debug de código TypeScript?</h3><p>TypeScrit assim como CoffeeScrit e Dart entre outros são pré-processadores que geram no final das contas código JavaScript. Como a maioria dos pré-processadores tenta melhorar a sintaxe do código na escrita de expressões lambda, iterações, classes, interfaces, heranças e etc, temos uma dissonância entre o código escrito em TypeScript por exemplo com o código JavaScript gerado no final.</p>
<p>Aqui entra em ação o Source Map. Com ele assim como podemos mapear um arquivo minificado com seu arquivo original, podemos também mapear um arquivo TypeScript original com seu código final gerado em JavaScript. Isso abre novas possibilidades de debug. Novas ferramentas de debug e refatoração podem ser criadas a partir deste recurso.</p>
<p>É aí que entra o assunto deste artigo. Vou mostrar como debugar TypeScript em um navegador com suporte a Source Maps. No meu caso vamos usar o Chrome.</p>
<h2 id="Habilitando-Source-Map-no-Google-Chrome"><a href="#Habilitando-Source-Map-no-Google-Chrome" class="headerlink" title="Habilitando Source Map no Google Chrome"></a>Habilitando Source Map no Google Chrome</h2><p>Para habilitar o recurso de source maps no Chrome basta acessar Settings e selecionar a caixa “Enable source maps”. Veja na imagem abaixo:</p>
<p><img src="/images/debug_typescript/enable_source_map.png" alt="Valid XHTML"></p>
<p>Feito isso estamos pronto para debugar nosso código.</p>
<h2 id="Criando-o-nosso-codigo-de-testes"><a href="#Criando-o-nosso-codigo-de-testes" class="headerlink" title="Criando o nosso código de testes"></a>Criando o nosso código de testes</h2><p>Para exemplo vamos criar um arquivo com um código TypeScript muito simples. Salve o código abaixo em um arquivo chamado <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">interface IPessoa&#123;</span><br><span class="line">	nome: string;</span><br><span class="line">	sobreNome: string;</span><br><span class="line">	nomeCompleto: () =&gt; string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Pessoa implements IPessoa &#123;</span><br><span class="line">	nome: string;</span><br><span class="line">	</span><br><span class="line">	sobreNome: string;</span><br><span class="line"></span><br><span class="line">	nomeCompleto(): string &#123;</span><br><span class="line">		return &quot;Nome: &quot; + this.nome + &quot; &quot; + this.sobreNome;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var pessoa = new Pessoa();</span><br><span class="line">pessoa.nome = &quot;Diullei&quot;;</span><br><span class="line">pessoa.sobreNome = &quot;Gomes&quot;;</span><br><span class="line"></span><br><span class="line">var element = document.getElementById(&apos;content&apos;);</span><br><span class="line"></span><br><span class="line">element.innerHTML = pessoa.nomeCompleto();</span><br></pre></td></tr></table></figure></p>
<p>Agora crie um arquivo chamado <figure class="highlight plain"><figcaption><span>e coloque o código abaixo:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">&lt;!DOCTYPE HTML&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">	&lt;meta&gt;</span><br><span class="line">	&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">	&lt;div id=&quot;content&quot;&gt;&lt;/div&gt;</span><br><span class="line">	&lt;script type=&quot;text/javascript&quot; src=&quot;script.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>Estes arquivos precisam estar no mesmo folder.</p>
<h2 id="Source-Maps-para-TypeScript"><a href="#Source-Maps-para-TypeScript" class="headerlink" title="Source Maps para TypeScript"></a>Source Maps para TypeScript</h2><p>Tendo nosso pequeno projeto em mãos agora precisamos gerar nosso arquivo source map. Felizmente o time que trabalha no TypeScript fez um trabalho muito bom incluindo um gerador de source maps no <a href="http://typescript.codeplex.com/SourceControl/changeset/view/d397c54a55db#src%2fcompiler%2fsourceMapping.ts" target="_blank" rel="noopener">compilador do TypeScript</a>. Embora não seja documentado no help do utilitário de compilação do TypeScript para gerar o arquivo sourcemap basta executar a compilação da seguinte forma: <figure class="highlight plain"><figcaption><span>--sourcemap script.ts```. Feito isso repare que um arquivo chamado ```script.js.map``` é gerado. Repare também que este arquivo é referenciado no final do arquivo script.js gerado pelo compilador como na linha abaixo:</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```//@ sourceMappingURL=script.js.map</span><br></pre></td></tr></table></figure></p>
<p>Tendo compilado o arquivo script.ts agora basta abrir a página <code>index.html</code> no Chrome. Coloque um breakpoint no código para ver o debug do TypeScript em ação. Veja na imagem abaixo:</p>
<p><img src="/images/debug_typescript/debug.png" alt="Valid XHTML"></p>
<h2 id="Conclusao"><a href="#Conclusao" class="headerlink" title="Conclusão"></a>Conclusão</h2><p>Como vimos o recurso Source Maps abre muitas possibilidades no tocante a rastreamento de código.</p>
<ul>
<li>Para saber mais sobre Source Maps acesse <a href="http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/" target="_blank" rel="noopener">http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/</a></li>
<li>Para saber mais sobre TypeScript acesse <a href="http://diullei.github.com/TypeScript-ptBR/" target="_blank" rel="noopener">http://diullei.github.com/TypeScript-ptBR/</a></li>
</ul>
<p>Um grande abraço e até a próxima!</p>
</div><!-- comment system--><div class="container"><hr><div id="disqus_thread"></div><script type="text/javascript">
var disqus_shortname = 'diullei-blog';
var disqus_identifier = '2012/10/16/Debugando-TyprScript-no-navegador/';
var disqus_title = 'Debugando TypeScript no navegador';
var disqus_url = 'http://diullei.com/2012/10/16/Debugando-TyprScript-no-navegador/';
(function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">Blog comments powered by <span class="logo-disqus">Disqus</span></a></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div><div class="footer">© 2018 <a href="/" rel="nofollow">Diullei Gomes</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>